<div class="fade-in">
  <!-- OTPInput -->
  <div class="card">
    <div class="card-header">
      <h3 class="card-header-title">
        <span class="material-icons" style="color: var(--primary);">pin</span>
        OTPInput
      </h3>
    </div>
    <div class="card-body">
      <p class="text-sm text-secondary mb-3">ì¸ì¦ë²ˆí˜¸ ì…ë ¥ (6ìë¦¬)</p>
      
      <p class="text-sm font-medium mb-2">ê¸°ë³¸</p>
      <div id="otp-basic" class="mb-4"></div>
      
      <p class="text-sm font-medium mb-2">êµ¬ë¶„ì ìˆìŒ (3-3)</p>
      <div id="otp-separator" class="mb-4"></div>
      
      <p class="text-sm font-medium mb-2">ë§ˆìŠ¤í‚¹</p>
      <div id="otp-masked" class="mb-4"></div>
      
      <button id="otp-verify" class="btn btn-primary btn-block mb-4">ì¸ì¦ í™•ì¸</button>
      
      <p class="text-sm font-medium mb-2">ìƒíƒœ</p>
      <p id="otp-status" class="text-sm p-3 bg-secondary rounded">OTPë¥¼ ì…ë ¥í•˜ì„¸ìš”</p>
    </div>
  </div>

  <!-- PinInput -->
  <div class="card">
    <div class="card-header">
      <h3 class="card-header-title">
        <span class="material-icons" style="color: var(--primary);">dialpad</span>
        PinInput
      </h3>
    </div>
    <div class="card-body">
      <p class="text-sm text-secondary mb-3">PIN ë²ˆí˜¸ ì…ë ¥ (í‚¤íŒ¨ë“œ)</p>
      
      <div id="pin-input" class="mb-4"></div>
      
      <p class="text-sm font-medium mb-2">ìƒíƒœ</p>
      <p id="pin-status" class="text-sm p-3 bg-secondary rounded">PINì„ ì…ë ¥í•˜ì„¸ìš”</p>
    </div>
  </div>

  <!-- PasswordInput -->
  <div class="card">
    <div class="card-header">
      <h3 class="card-header-title">
        <span class="material-icons" style="color: var(--primary);">password</span>
        PasswordInput
      </h3>
    </div>
    <div class="card-body">
      <p class="text-sm text-secondary mb-3">ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ (ê°•ë„ í‘œì‹œ)</p>
      
      <div id="password-input" class="mb-4"></div>
      
      <button id="password-submit" class="btn btn-primary btn-block" disabled>ë¹„ë°€ë²ˆí˜¸ ì„¤ì •</button>
    </div>
  </div>

  <!-- SocialLoginButtons -->
  <div class="card">
    <div class="card-header">
      <h3 class="card-header-title">
        <span class="material-icons" style="color: var(--primary);">login</span>
        SocialLoginButtons
      </h3>
    </div>
    <div class="card-body">
      <p class="text-sm text-secondary mb-3">ì†Œì…œ ë¡œê·¸ì¸ ë²„íŠ¼ ê·¸ë£¹</p>
      
      <p class="text-sm font-medium mb-2">ê¸°ë³¸ (ìˆ˜ì§)</p>
      <div id="social-vertical" class="mb-4"></div>
      
      <p class="text-sm font-medium mb-2">ì•„ì´ì½˜ë§Œ (ë‘¥ê·¼)</p>
      <div id="social-icons" class="mb-4"></div>
      
      <p class="text-sm font-medium mb-2">ìƒíƒœ</p>
      <p id="social-status" class="text-sm p-3 bg-secondary rounded">ë¡œê·¸ì¸ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”</p>
    </div>
  </div>

  <!-- BiometricPrompt -->
  <div class="card">
    <div class="card-header">
      <h3 class="card-header-title">
        <span class="material-icons" style="color: var(--primary);">fingerprint</span>
        BiometricPrompt
      </h3>
    </div>
    <div class="card-body">
      <p class="text-sm text-secondary mb-3">ìƒì²´ì¸ì¦ ì•ˆë‚´ UI</p>
      
      <div class="flex flex-wrap gap-2 mb-4">
        <button id="biometric-fingerprint" class="btn btn-outline">ì§€ë¬¸ ì¸ì¦</button>
        <button id="biometric-face" class="btn btn-outline">ì–¼êµ´ ì¸ì¦</button>
        <button id="biometric-success" class="btn btn-primary">ì„±ê³µ ì‹œë®¬ë ˆì´ì…˜</button>
        <button id="biometric-error" class="btn btn-danger">ì‹¤íŒ¨ ì‹œë®¬ë ˆì´ì…˜</button>
      </div>
      
      <p class="text-sm font-medium mb-2">ìƒíƒœ</p>
      <p id="biometric-status" class="text-sm p-3 bg-secondary rounded">ìƒì²´ì¸ì¦ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”</p>
    </div>
  </div>

  <!-- ì‚¬ìš© ì˜ˆì‹œ -->
  <div class="card">
    <div class="card-header">
      <h3 class="card-header-title">
        <span class="material-icons" style="color: var(--primary);">code</span>
        ì‚¬ìš© ì˜ˆì‹œ
      </h3>
    </div>
    <div class="card-body">
      <pre class="demo-code"><code>// ëª¨ë“ˆ ë¡œë“œ
const Auth = await CATUI.use('auth');

// OTPInput
const otp = new Auth.OTPInput({
  container: '#otp',
  length: 6,
  type: 'number',
  autoFocus: true,
  onComplete: (code) => verifyOTP(code)
});

// PinInput
const pin = new Auth.PinInput({
  container: '#pin',
  length: 4,
  shuffle: true,
  biometric: true,
  onComplete: (pin) => verifyPin(pin)
});

// PasswordInput
const password = new Auth.PasswordInput({
  container: '#password',
  showStrength: true,
  minLength: 8
});</code></pre>
    </div>
  </div>
</div>

<script type="module">
(async () => {
  const Auth = await CATUI.use('auth');
  const otpStatus = CATUI('#otp-status');
  const pinStatus = CATUI('#pin-status');

  // ========================================
  // OTPInput ê¸°ë³¸
  // ========================================
  const otpBasic = new Auth.OTPInput({
    container: '#otp-basic',
    length: 6,
    type: 'number',
    autoFocus: true,
    onInput: (value) => {
      otpStatus.text(`ì…ë ¥ ì¤‘: ${value} (${value.length}/6)`);
    },
    onComplete: (code) => {
      otpStatus.text(`ì™„ë£Œ: ${code}`);
    }
  });

  // OTPInput êµ¬ë¶„ì
  const otpSeparator = new Auth.OTPInput({
    container: '#otp-separator',
    length: 6,
    type: 'number',
    separator: '-',
    separatorPosition: [3],
    onComplete: (code) => {
      otpStatus.text(`êµ¬ë¶„ì OTP ì™„ë£Œ: ${code}`);
    }
  });

  // OTPInput ë§ˆìŠ¤í‚¹
  const otpMasked = new Auth.OTPInput({
    container: '#otp-masked',
    length: 6,
    type: 'number',
    masked: true,
    onComplete: (code) => {
      otpStatus.text(`ë§ˆìŠ¤í‚¹ OTP ì™„ë£Œ: ${code}`);
    }
  });

  // ì¸ì¦ í™•ì¸ ë²„íŠ¼
  CATUI('#otp-verify').on('click', () => {
    const code = otpBasic.getValue();
    
    if (code.length !== 6) {
      otpBasic.setError(true);
      otpStatus.text('6ìë¦¬ë¥¼ ëª¨ë‘ ì…ë ¥í•˜ì„¸ìš”');
      return;
    }

    if (code === '123456') {
      otpStatus.text('âœ… ì¸ì¦ ì„±ê³µ!');
      otpBasic.setDisabled(true);
    } else {
      otpBasic.setError(true);
      otpStatus.text('âŒ ì¸ì¦ ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.');
      setTimeout(() => otpBasic.clear(), 500);
    }
  });

  // ========================================
  // PinInput
  // ========================================
  const pinInput = new Auth.PinInput({
    container: '#pin-input',
    length: 4,
    title: 'PIN ì…ë ¥',
    subtitle: '4ìë¦¬ PINì„ ì…ë ¥í•˜ì„¸ìš”',
    shuffle: true,
    biometric: true,
    haptic: true,
    onInput: (length) => {
      pinStatus.text(`ì…ë ¥ ì¤‘: ${'â—'.repeat(length)}${'â—‹'.repeat(4 - length)}`);
    },
    onComplete: (pin) => {
      if (pin === '1234') {
        pinStatus.text('âœ… PIN ì¸ì¦ ì„±ê³µ!');
        pinInput.setLocked(true);
      } else {
        pinStatus.text('âŒ PINì´ í‹€ë ¸ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.');
        pinInput.setError(true);
        setTimeout(() => {
          pinInput.clear();
          pinInput.shuffle();
        }, 500);
      }
    },
    onBiometric: () => {
      pinStatus.text('ğŸ” ìƒì²´ì¸ì¦ ìš”ì²­...');
      setTimeout(() => {
        pinStatus.text('âœ… ìƒì²´ì¸ì¦ ì„±ê³µ!');
        pinInput.setLocked(true);
      }, 1000);
    }
  });

  // ========================================
  // PasswordInput
  // ========================================
  const submitBtn = CATUI('#password-submit');

  const passwordInput = new Auth.PasswordInput({
    container: '#password-input',
    placeholder: 'ìƒˆ ë¹„ë°€ë²ˆí˜¸',
    showStrength: true,
    minLength: 8,
    requireUppercase: true,
    requireLowercase: true,
    requireNumber: true,
    requireSpecial: false,
    onStrengthChange: (strength, level) => {
      submitBtn.attr('disabled', strength < 100);
    }
  });

  submitBtn.on('click', () => {
    if (passwordInput.isValid()) {
      alert(`ë¹„ë°€ë²ˆí˜¸ ì„¤ì • ì™„ë£Œ: ${passwordInput.getValue()}`);
    }
  });

  // ========================================
  // SocialLoginButtons
  // ========================================
  const socialStatus = CATUI('#social-status');

  const socialVertical = new Auth.SocialLoginButtons({
    container: '#social-vertical',
    providers: ['google', 'kakao', 'naver', 'apple'],
    layout: 'vertical',
    onClick: (provider) => {
      socialStatus.text(`${provider} ë¡œê·¸ì¸ ì‹œë„ ì¤‘...`);
      socialVertical.setLoading(provider, true);
      
      setTimeout(() => {
        socialVertical.setLoading(provider, false);
        socialStatus.text(`âœ… ${provider} ë¡œê·¸ì¸ ì„±ê³µ!`);
      }, 1500);
    }
  });

  const socialIcons = new Auth.SocialLoginButtons({
    container: '#social-icons',
    providers: ['google', 'kakao', 'naver', 'apple', 'facebook'],
    iconOnly: true,
    rounded: true,
    onClick: (provider) => {
      socialStatus.text(`${provider} ì„ íƒë¨`);
    }
  });

  // ========================================
  // BiometricPrompt
  // ========================================
  const biometricStatus = CATUI('#biometric-status');
  let currentBiometric = null;

  CATUI('#biometric-fingerprint').on('click', () => {
    currentBiometric = new Auth.BiometricPrompt({
      type: 'fingerprint',
      title: 'ì§€ë¬¸ ì¸ì¦',
      subtitle: 'ë³´ì•ˆì„ ìœ„í•´ ì¸ì¦í•´ ì£¼ì„¸ìš”',
      description: 'ì§€ë¬¸ ì„¼ì„œì— ì†ê°€ë½ì„ ì˜¬ë ¤ì£¼ì„¸ìš”',
      onAuthenticate: () => biometricStatus.text('ì¸ì¦ ì§„í–‰ ì¤‘...'),
      onCancel: () => biometricStatus.text('ì¸ì¦ ì·¨ì†Œë¨'),
      onError: (msg) => biometricStatus.text(`âŒ ${msg}`)
    });
    currentBiometric.open();
  });

  CATUI('#biometric-face').on('click', () => {
    currentBiometric = new Auth.BiometricPrompt({
      type: 'face',
      title: 'ì–¼êµ´ ì¸ì‹',
      description: 'ì¹´ë©”ë¼ë¥¼ ë°”ë¼ë´ ì£¼ì„¸ìš”',
      onAuthenticate: () => biometricStatus.text('ì¸ì¦ ì§„í–‰ ì¤‘...'),
      onCancel: () => biometricStatus.text('ì¸ì¦ ì·¨ì†Œë¨')
    });
    currentBiometric.open();
  });

  CATUI('#biometric-success').on('click', () => {
    if (currentBiometric) {
      currentBiometric.success();
      biometricStatus.text('âœ… ìƒì²´ì¸ì¦ ì„±ê³µ!');
    } else {
      biometricStatus.text('ë¨¼ì € ì¸ì¦ì„ ì‹œì‘í•˜ì„¸ìš”');
    }
  });

  CATUI('#biometric-error').on('click', () => {
    if (currentBiometric) {
      currentBiometric.error('ì¸ì‹ ì‹¤íŒ¨');
    } else {
      biometricStatus.text('ë¨¼ì € ì¸ì¦ì„ ì‹œì‘í•˜ì„¸ìš”');
    }
  });
})();
</script>
