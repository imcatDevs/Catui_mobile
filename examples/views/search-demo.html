<div class="fade-in">
  <!-- SearchBar -->
  <div class="card">
    <div class="card-header">
      <h3 class="card-header-title">
        <span class="material-icons" style="color: var(--primary);">search</span>
        SearchBar
      </h3>
    </div>
    <div class="card-body">
      <p class="text-sm text-secondary mb-3">í™•ì¥í˜• ê²€ìƒ‰ë°” ì»´í¬ë„ŒíŠ¸</p>
      
      <p class="text-sm font-medium mb-2">ê¸°ë³¸</p>
      <div id="searchbar-basic" class="mb-4"></div>
      
      <p class="text-sm font-medium mb-2">í™•ì¥í˜• (ì•„ì´ì½˜ í´ë¦­)</p>
      <div id="searchbar-expandable" class="mb-4"></div>
      
      <p class="text-sm font-medium mb-2">ìƒíƒœ</p>
      <p id="searchbar-status" class="text-sm p-3 bg-secondary rounded">ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”</p>
    </div>
  </div>

  <!-- SearchHistory -->
  <div class="card">
    <div class="card-header">
      <h3 class="card-header-title">
        <span class="material-icons" style="color: var(--primary);">history</span>
        SearchHistory
      </h3>
    </div>
    <div class="card-body">
      <p class="text-sm text-secondary mb-3">ìµœê·¼ ê²€ìƒ‰ì–´ ê¸°ë¡ ê´€ë¦¬</p>
      
      <div id="search-history" class="mb-3" style="border: 1px solid var(--border-color); border-radius: 8px; overflow: hidden;"></div>
      
      <div class="flex gap-2 mb-4">
        <button id="history-add" class="btn btn-outline">ê²€ìƒ‰ì–´ ì¶”ê°€</button>
      </div>
      
      <p class="text-sm font-medium mb-2">ìƒíƒœ</p>
      <p id="history-status" class="text-sm p-3 bg-secondary rounded">ê²€ìƒ‰ ê¸°ë¡ì„ í´ë¦­í•˜ì„¸ìš”</p>
    </div>
  </div>

  <!-- SearchFilter -->
  <div class="card">
    <div class="card-header">
      <h3 class="card-header-title">
        <span class="material-icons" style="color: var(--primary);">tune</span>
        SearchFilter
      </h3>
    </div>
    <div class="card-body">
      <p class="text-sm text-secondary mb-3">ê²€ìƒ‰ í•„í„° (ë°”í…€ì‹œíŠ¸)</p>
      
      <button id="filter-open" class="btn btn-primary mb-4">
        í•„í„° ì—´ê¸° <span id="filter-count"></span>
      </button>
      
      <p class="text-sm font-medium mb-2">ì ìš©ëœ í•„í„°</p>
      <pre id="filter-status" class="text-sm p-3 bg-secondary rounded" style="white-space: pre-wrap; margin: 0;">í•„í„°ê°€ ì—†ìŠµë‹ˆë‹¤</pre>
    </div>
  </div>

  <!-- SearchSuggestion -->
  <div class="card">
    <div class="card-header">
      <h3 class="card-header-title">
        <span class="material-icons" style="color: var(--primary);">auto_awesome</span>
        SearchSuggestion
      </h3>
    </div>
    <div class="card-body">
      <p class="text-sm text-secondary mb-3">ê²€ìƒ‰ì–´ ìë™ì™„ì„±</p>
      
      <div id="suggestion-search" class="mb-2"></div>
      <div id="search-suggestion" style="border: 1px solid var(--border-color); border-radius: 8px; overflow: hidden; min-height: 50px;"></div>
      
      <p class="text-sm font-medium mt-4 mb-2">ìƒíƒœ</p>
      <p id="suggestion-status" class="text-sm p-3 bg-secondary rounded">ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”</p>
    </div>
  </div>

  <!-- ì‚¬ìš© ì˜ˆì‹œ -->
  <div class="card">
    <div class="card-header">
      <h3 class="card-header-title">
        <span class="material-icons" style="color: var(--primary);">code</span>
        ì‚¬ìš© ì˜ˆì‹œ
      </h3>
    </div>
    <div class="card-body">
      <pre class="demo-code"><code>// ëª¨ë“ˆ ë¡œë“œ
const Search = await CATUI.use('search');

// SearchBar
const searchBar = new Search.SearchBar({
  container: '#searchbar',
  placeholder: 'ê²€ìƒ‰ì–´ ì…ë ¥',
  expandable: false,
  onSearch: (value) => console.log('ê²€ìƒ‰:', value),
  onInput: (value) => console.log('ì…ë ¥:', value)
});

// SearchHistory
const history = new Search.SearchHistory({
  container: '#history',
  maxItems: 10,
  onSelect: (text) => {
    searchBar.setValue(text);
    searchBar.focus();
  }
});

// SearchFilter
const filter = new Search.SearchFilter({
  filters: [
    {
      id: 'category',
      label: 'ì¹´í…Œê³ ë¦¬',
      type: 'chips',
      options: [
        { label: 'ì „ì²´', value: 'all' },
        { label: 'ìŒì‹', value: 'food' }
      ]
    }
  ],
  onApply: (values) => console.log('í•„í„°:', values)
});

// SearchSuggestion
const suggestion = new Search.SearchSuggestion({
  container: '#suggestion',
  items: ['ì‚¬ê³¼', 'ë°”ë‚˜ë‚˜', 'ì˜¤ë Œì§€'],
  onSelect: (item) => console.log('ì„ íƒ:', item)
});</code></pre>
    </div>
  </div>
</div>

<script type="module">
(async () => {
  const Search = await CATUI.use('search');

  // ========================================
  // SearchBar
  // ========================================
  const searchbarStatus = CATUI('#searchbar-status');

  // ê¸°ë³¸
  const searchbarBasic = new Search.SearchBar({
    container: '#searchbar-basic',
    placeholder: 'ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”',
    onSearch: (value) => {
      searchbarStatus.text(`ğŸ” ê²€ìƒ‰: "${value}"`);
      // ê²€ìƒ‰ ê¸°ë¡ì— ì¶”ê°€
      searchHistory.add(value);
    },
    onInput: (value) => {
      searchbarStatus.text(`ì…ë ¥ ì¤‘: "${value}"`);
      // ìë™ì™„ì„± ì—…ë°ì´íŠ¸
      searchSuggestion.update(value);
    },
    onClear: () => {
      searchbarStatus.text('ê²€ìƒ‰ì–´ê°€ ì§€ì›Œì¡ŒìŠµë‹ˆë‹¤');
      searchSuggestion.clear();
    }
  });

  // í™•ì¥í˜•
  const searchbarExpandable = new Search.SearchBar({
    container: '#searchbar-expandable',
    placeholder: 'ê²€ìƒ‰',
    expandable: true,
    onSearch: (value) => {
      searchbarStatus.text(`ğŸ” ê²€ìƒ‰ (í™•ì¥í˜•): "${value}"`);
    },
    onCancel: () => {
      searchbarStatus.text('ê²€ìƒ‰ ì·¨ì†Œ');
    }
  });

  // ========================================
  // SearchHistory
  // ========================================
  const historyStatus = CATUI('#history-status');

  const searchHistory = new Search.SearchHistory({
    container: '#search-history',
    storageKey: 'catui_demo_history',
    maxItems: 5,
    onSelect: (text) => {
      historyStatus.text(`ì„ íƒë¨: "${text}"`);
      searchbarBasic.setValue(text);
      searchbarBasic.focus();
    },
    onRemove: (text) => {
      historyStatus.text(`ì‚­ì œë¨: "${text}"`);
    },
    onClear: () => {
      historyStatus.text('ì „ì²´ ì‚­ì œë¨');
    }
  });

  // ê²€ìƒ‰ì–´ ì¶”ê°€ ë²„íŠ¼
  let addCount = 0;
  CATUI('#history-add').on('click', () => {
    addCount++;
    searchHistory.add(`í…ŒìŠ¤íŠ¸ ê²€ìƒ‰ì–´ ${addCount}`);
    historyStatus.text(`ì¶”ê°€ë¨: "í…ŒìŠ¤íŠ¸ ê²€ìƒ‰ì–´ ${addCount}"`);
  });

  // ========================================
  // SearchFilter
  // ========================================
  const filterStatus = CATUI('#filter-status');
  const filterCountEl = CATUI('#filter-count');

  const searchFilter = new Search.SearchFilter({
    title: 'ê²€ìƒ‰ í•„í„°',
    filters: [
      {
        id: 'category',
        label: 'ì¹´í…Œê³ ë¦¬',
        type: 'chips',
        options: [
          { label: 'ì „ì²´', value: 'all' },
          { label: 'ìŒì‹', value: 'food' },
          { label: 'ìŒë£Œ', value: 'drink' },
          { label: 'ë””ì €íŠ¸', value: 'dessert' }
        ]
      },
      {
        id: 'sort',
        label: 'ì •ë ¬',
        type: 'radio',
        options: [
          { label: 'ê´€ë ¨ë„ìˆœ', value: 'relevance' },
          { label: 'ìµœì‹ ìˆœ', value: 'recent' },
          { label: 'ì¸ê¸°ìˆœ', value: 'popular' }
        ]
      },
      {
        id: 'price',
        label: 'ê°€ê²©ëŒ€',
        type: 'select',
        options: [
          { label: '1ë§Œì› ì´í•˜', value: '0-10000' },
          { label: '1-3ë§Œì›', value: '10000-30000' },
          { label: '3-5ë§Œì›', value: '30000-50000' },
          { label: '5ë§Œì› ì´ìƒ', value: '50000+' }
        ]
      },
      {
        id: 'rating',
        label: 'ìµœì†Œ í‰ì ',
        type: 'range',
        min: 0,
        max: 5,
        value: 3
      }
    ],
    onApply: (values) => {
      const count = Object.keys(values).length;
      filterCountEl.text(count > 0 ? `(${count})` : '');
      filterStatus.text(`ì ìš©ëœ í•„í„°: ${JSON.stringify(values, null, 2)}`);
    },
    onReset: () => {
      filterCountEl.text('');
      filterStatus.text('í•„í„°ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤');
    }
  });

  CATUI('#filter-open').on('click', () => {
    searchFilter.open();
  });

  // ========================================
  // SearchSuggestion
  // ========================================
  const suggestionStatus = CATUI('#suggestion-status');

  // ìë™ì™„ì„±ìš© ê²€ìƒ‰ë°”
  const suggestionSearch = new Search.SearchBar({
    container: '#suggestion-search',
    placeholder: 'ê³¼ì¼ ì´ë¦„ì„ ê²€ìƒ‰í•˜ì„¸ìš”',
    showCancel: false,
    onInput: (value) => {
      searchSuggestion.update(value);
    },
    onSearch: (value) => {
      suggestionStatus.text(`ğŸ” ê²€ìƒ‰: "${value}"`);
      searchSuggestion.clear();
    }
  });

  // ìë™ì™„ì„±
  const searchSuggestion = new Search.SearchSuggestion({
    container: '#search-suggestion',
    items: [
      { text: 'ì‚¬ê³¼', icon: 'local_florist' },
      { text: 'ë°”ë‚˜ë‚˜', icon: 'local_florist' },
      { text: 'ì˜¤ë Œì§€', icon: 'local_florist' },
      { text: 'í¬ë„', icon: 'local_florist' },
      { text: 'ë”¸ê¸°', icon: 'local_florist' },
      { text: 'ìˆ˜ë°•', icon: 'local_florist' },
      { text: 'ì°¸ì™¸', icon: 'local_florist' },
      { text: 'ë³µìˆ­ì•„', icon: 'local_florist' },
      { text: 'ë°°', icon: 'local_florist' },
      { text: 'ê°', icon: 'local_florist' }
    ],
    highlight: true,
    onSelect: (item) => {
      const text = item.text || item;
      suggestionSearch.setValue(text);
      suggestionStatus.text(`ì„ íƒë¨: "${text}"`);
      searchSuggestion.clear();
    }
  });
})();
</script>
