/**
 * CATUI Mobile - Feedback Components
 * @description Alert, Badge, Progress, Spinner 등 피드백 요소
 */

@use '../abstracts' as *;

// ========================================
// Alert
// ========================================
.alert {
  display: flex;
  align-items: flex-start;
  gap: $component-alert-gap;
  padding: $component-alert-padding;
  border-radius: $component-alert-border-radius;
  border: $component-alert-border-width solid transparent;
  
  .alert-icon {
    flex-shrink: 0;
    
    .material-icons,
    .material-icons-outlined {
      font-size: $component-alert-icon-size;
    }
  }
  
  .alert-content {
    flex: 1;
    min-width: 0;
  }
  
  .alert-title {
    font-weight: 600;
    margin-bottom: $spacing-1;
  }
  
  .alert-text {
    font-size: $font-size-sm;
    line-height: $line-height-relaxed;
  }
  
  .alert-close {
    flex-shrink: 0;
    cursor: pointer;
    opacity: 0.6;
    transition: opacity $duration-fast;
    
    &:hover {
      opacity: 1;
    }
  }
}

// Alert variants
.alert-info {
  background: $component-alert-variant-info-background;
  border-color: $component-alert-variant-info-border;
  
  .alert-icon { color: $component-alert-variant-info-icon; }
  .alert-title { color: $component-alert-variant-info-title; }
  .alert-text { color: $component-alert-variant-info-text; }
}

.alert-success {
  background: $component-alert-variant-success-background;
  border-color: $component-alert-variant-success-border;
  
  .alert-icon { color: $component-alert-variant-success-icon; }
  .alert-title { color: $component-alert-variant-success-title; }
  .alert-text { color: $component-alert-variant-success-text; }
}

.alert-warning {
  background: $component-alert-variant-warning-background;
  border-color: $component-alert-variant-warning-border;
  
  .alert-icon { color: $component-alert-variant-warning-icon; }
  .alert-title { color: $component-alert-variant-warning-title; }
  .alert-text { color: $component-alert-variant-warning-text; }
}

.alert-error,
.alert-danger {
  background: $component-alert-variant-error-background;
  border-color: $component-alert-variant-error-border;
  
  .alert-icon { color: $component-alert-variant-error-icon; }
  .alert-title { color: $component-alert-variant-error-title; }
  .alert-text { color: $component-alert-variant-error-text; }
}

// ========================================
// Badge
// ========================================
.badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: $component-badge-size-sm-padding-y $component-badge-size-sm-padding-x;
  font-size: $component-badge-size-sm-font-size;
  font-weight: 500;
  line-height: 1;
  border-radius: $component-badge-size-sm-border-radius;
  white-space: nowrap;
}

// Badge variants
.badge-default {
  background: $component-badge-variant-default-background;
  color: $component-badge-variant-default-text;
}

.badge-primary {
  background: $component-badge-variant-primary-background;
  color: $component-badge-variant-primary-text;
}

.badge-success {
  background: $component-badge-variant-success-background;
  color: $component-badge-variant-success-text;
}

.badge-warning {
  background: $component-badge-variant-warning-background;
  color: $component-badge-variant-warning-text;
}

.badge-error,
.badge-danger {
  background: $component-badge-variant-error-background;
  color: $component-badge-variant-error-text;
}

.badge-outline {
  background: $component-badge-variant-outline-background;
  border: 1px solid $component-badge-variant-outline-border;
  color: $component-badge-variant-outline-text;
}

// Solid badges
.badge-solid-primary {
  background: $primary;
  color: white;
}

.badge-solid-success {
  background: $success;
  color: white;
}

.badge-solid-danger {
  background: $danger;
  color: white;
}

// Badge sizes
.badge-md {
  padding: $component-badge-size-md-padding-y $component-badge-size-md-padding-x;
  font-size: $component-badge-size-md-font-size;
}

// Badge shapes
.badge-pill {
  border-radius: $radius-full;
}

.badge-dot {
  width: 0.5rem;
  height: 0.5rem;
  padding: 0;
  border-radius: 50%;
}

// ========================================
// Tag / Chip
// ========================================
.tag {
  display: inline-flex;
  align-items: center;
  gap: $component-chip-gap;
  padding: $component-chip-padding-y $component-chip-padding-x;
  font-size: $component-chip-font-size;
  border-radius: $component-chip-border-radius;
  background: $component-chip-variant-filled-background;
  color: $component-chip-variant-filled-text;
  
  .tag-close {
    cursor: pointer;
    opacity: 0.6;
    margin-left: $spacing-1;
    transition: opacity $duration-fast;
    
    &:hover {
      opacity: 1;
    }
    
    .material-icons {
      font-size: $icon-size-xs;
    }
  }
}

.tag-primary {
  background: $component-chip-color-primary-background;
  color: $component-chip-color-primary-text;
}

.tag-success {
  background: $component-chip-color-success-background;
  color: $component-chip-color-success-text;
}

.tag-warning {
  background: $component-chip-color-warning-background;
  color: $component-chip-color-warning-text;
}

.tag-error {
  background: $component-chip-color-error-background;
  color: $component-chip-color-error-text;
}

// ========================================
// Progress Bar
// ========================================
.progress {
  width: 100%;
  height: 0.5rem;
  background: var(--bg-tertiary);
  border-radius: $radius-full;
  overflow: hidden;
  
  .progress-bar {
    height: 100%;
    background: $primary;
    border-radius: $radius-full;
    transition: width $duration-slow $ease-in-out;
  }
  
  &.progress-sm {
    height: 0.25rem;
  }
  
  &.progress-lg {
    height: 0.75rem;
  }
}

// Progress variants
.progress-success .progress-bar { background: $success; }
.progress-warning .progress-bar { background: $warning; }
.progress-danger .progress-bar { background: $danger; }

// Progress with label
.progress-labeled {
  position: relative;
  height: 1.25rem;
  
  .progress-bar {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .progress-label {
    position: absolute;
    width: 100%;
    text-align: center;
    font-size: $font-size-xs;
    font-weight: 600;
    color: var(--text-primary);
    line-height: 1.25rem;
  }
}

// Indeterminate progress
.progress-indeterminate {
  .progress-bar {
    width: 30%;
    animation: progress-indeterminate 1.5s ease-in-out infinite;
  }
}

@keyframes progress-indeterminate {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(400%); }
}

// ========================================
// Circular Progress
// ========================================
.progress-circle {
  position: relative;
  width: 3rem;
  height: 3rem;
  
  svg {
    transform: rotate(-90deg);
    
    circle {
      fill: none;
      stroke-width: 4;
      stroke-linecap: round;
      
      &.progress-circle-bg {
        stroke: var(--bg-tertiary);
      }
      
      &.progress-circle-bar {
        stroke: $primary;
        transition: stroke-dashoffset $duration-slow $ease-in-out;
      }
    }
  }
  
  .progress-circle-label {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: $font-size-sm;
    font-weight: 600;
  }
  
  &.progress-circle-sm {
    width: $icon-size-lg;
    height: $icon-size-lg;
    
    .progress-circle-label {
      font-size: $font-size-xs;
    }
  }
  
  &.progress-circle-lg {
    width: 4rem;
    height: 4rem;
    
    .progress-circle-label {
      font-size: $font-size-base;
    }
  }
}

// ========================================
// Spinner
// ========================================
.spinner {
  width: $icon-size-md;
  height: $icon-size-md;
  border: 3px solid var(--bg-tertiary);
  border-top-color: $primary;
  border-radius: 50%;
  animation: spinner-rotate 0.8s linear infinite;
  
  &.spinner-sm {
    width: $icon-size-xs;
    height: $icon-size-xs;
    border-width: 2px;
  }
  
  &.spinner-lg {
    width: $component-fab-size-sm;
    height: $component-fab-size-sm;
    border-width: 4px;
  }
  
  &.spinner-xl {
    width: $component-fab-size-md;
    height: $component-fab-size-md;
    border-width: 5px;
  }
}

// Spinner colors
.spinner-primary { border-top-color: $primary; }
.spinner-success { border-top-color: $success; }
.spinner-danger { border-top-color: $danger; }
.spinner-white { border-color: rgba(255,255,255,0.3); border-top-color: white; }

@keyframes spinner-rotate {
  to { transform: rotate(360deg); }
}

// Dots spinner
.spinner-dots {
  display: inline-flex;
  gap: 0.25rem;
  
  span {
    width: 0.5rem;
    height: 0.5rem;
    background: $primary;
    border-radius: 50%;
    animation: spinner-dots 1s ease-in-out infinite;
    
    &:nth-child(2) { animation-delay: 0.16s; }
    &:nth-child(3) { animation-delay: 0.32s; }
  }
}

@keyframes spinner-dots {
  0%, 80%, 100% { transform: scale(0); opacity: 0.5; }
  40% { transform: scale(1); opacity: 1; }
}

// ========================================
// Skeleton
// ========================================
.skeleton {
  background: linear-gradient(90deg, var(--bg-tertiary) 25%, var(--bg-secondary) 50%, var(--bg-tertiary) 75%);
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s infinite;
  border-radius: $radius-default;
}

.skeleton-text {
  height: 0.875rem;
  margin-bottom: $spacing-2;
  
  &:last-child {
    width: 60%;
    margin-bottom: 0;
  }
}

.skeleton-title {
  height: 1.25rem;
  width: 50%;
  margin-bottom: $spacing-3;
}

.skeleton-avatar {
  width: $component-fab-size-sm;
  height: $component-fab-size-sm;
  border-radius: 50%;
}

.skeleton-image {
  width: 100%;
  height: 12.5rem;
}

.skeleton-button {
  width: 6.25rem;
  height: $component-fab-size-sm;
}

@keyframes skeleton-shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

// ========================================
// Empty State
// ========================================
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: $spacing-8;
  text-align: center;
  
  .empty-state-icon {
    font-size: 4rem;
    color: var(--text-tertiary);
    margin-bottom: $spacing-4;
  }
  
  .empty-state-title {
    font-size: $font-size-lg;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: $spacing-2;
  }
  
  .empty-state-text {
    font-size: $font-size-sm;
    color: var(--text-secondary);
    margin-bottom: $spacing-4;
    max-width: 17.5rem;
  }
}

// ========================================
// Toast (간단한 스타일)
// ========================================
.toast {
  display: flex;
  align-items: center;
  gap: $component-toast-gap;
  padding: $component-toast-padding;
  background: $component-toast-background;
  border-radius: $component-toast-border-radius;
  box-shadow: $component-toast-shadow;
  max-width: $component-toast-max-width;
  
  .toast-icon {
    flex-shrink: 0;
  }
  
  .toast-content {
    flex: 1;
  }
  
  .toast-close {
    flex-shrink: 0;
    cursor: pointer;
    opacity: 0.6;
    
    &:hover {
      opacity: 1;
    }
  }
}

.toast-success .toast-icon { color: $success; }
.toast-error .toast-icon { color: $danger; }
.toast-warning .toast-icon { color: $warning; }
.toast-info .toast-icon { color: $info; }

// ========================================
// Dark Mode
// ========================================
[data-theme="dark"] {
  .badge-default {
    background: $dark-bg-tertiary;
    color: $dark-text-primary;
  }
  
  .badge-outline {
    border-color: $dark-border-color;
    color: $dark-text-primary;
  }
  
  .tag {
    background: $dark-bg-tertiary;
    color: $dark-text-primary;
  }
  
  .progress {
    background: $dark-bg-tertiary;
  }
  
  .spinner {
    border-color: $dark-bg-tertiary;
    border-top-color: $color-dark-primary-default;
  }
  
  .skeleton {
    background: linear-gradient(90deg, $dark-bg-tertiary 25%, $dark-bg-secondary 50%, $dark-bg-tertiary 75%);
    background-size: 200% 100%;
  }
  
  .toast {
    background: $dark-bg-secondary;
  }
}
