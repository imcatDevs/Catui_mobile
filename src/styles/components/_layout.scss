/**
 * CATUI Mobile - Layout Components
 * @description 모바일 최적화 레이아웃 시스템
 */

@use '../abstracts' as *;

// ========================================
// Container
// ========================================
.container {
  width: 100%;
  max-width: 100%;
  margin: 0 auto;
  padding-left: $spacing-4;
  padding-right: $spacing-4;
  
  &.container-sm {
    max-width: 540px;
  }
  
  &.container-md {
    max-width: 720px;
  }
  
  &.container-lg {
    max-width: 960px;
  }
  
  &.container-xl {
    max-width: 1140px;
  }
  
  &.container-fluid {
    max-width: 100%;
    padding-left: $spacing-4;
    padding-right: $spacing-4;
  }
}

// ========================================
// Grid System
// ========================================
.row {
  display: flex;
  flex-wrap: wrap;
  margin-left: -$spacing-2;
  margin-right: -$spacing-2;
  
  &.row-dense {
    margin-left: -$spacing-1;
    margin-right: -$spacing-1;
    
    > [class*="col"] {
      padding-left: $spacing-1;
      padding-right: $spacing-1;
    }
  }
  
  &.row-gap-0 { gap: 0; }
  &.row-gap-1 { gap: $spacing-1; }
  &.row-gap-2 { gap: $spacing-2; }
  &.row-gap-3 { gap: $spacing-3; }
  &.row-gap-4 { gap: $spacing-4; }
}

// Column base
[class*="col"] {
  padding-left: $spacing-2;
  padding-right: $spacing-2;
}

// Auto columns
.col {
  flex: 1 0 0%;
}

.col-auto {
  flex: 0 0 auto;
  width: auto;
}

// Fixed columns (12-column grid)
@for $i from 1 through 12 {
  .col-#{$i} {
    flex: 0 0 auto;
    width: calc(100% / 12 * #{$i});
  }
}

// Responsive columns
@media (min-width: 576px) {
  @for $i from 1 through 12 {
    .col-sm-#{$i} {
      flex: 0 0 auto;
      width: calc(100% / 12 * #{$i});
    }
  }
}

@media (min-width: 768px) {
  @for $i from 1 through 12 {
    .col-md-#{$i} {
      flex: 0 0 auto;
      width: calc(100% / 12 * #{$i});
    }
  }
}

// ========================================
// Flexbox Container
// ========================================
.flex {
  display: flex;
}

.inline-flex {
  display: inline-flex;
}

// Direction
.flex-row { flex-direction: row; }
.flex-row-reverse { flex-direction: row-reverse; }
.flex-col { flex-direction: column; }
.flex-col-reverse { flex-direction: column-reverse; }

// Wrap
.flex-wrap { flex-wrap: wrap; }
.flex-nowrap { flex-wrap: nowrap; }
.flex-wrap-reverse { flex-wrap: wrap-reverse; }

// Justify Content
.justify-start { justify-content: flex-start; }
.justify-end { justify-content: flex-end; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.justify-around { justify-content: space-around; }
.justify-evenly { justify-content: space-evenly; }

// Align Items
.items-start { align-items: flex-start; }
.items-end { align-items: flex-end; }
.items-center { align-items: center; }
.items-baseline { align-items: baseline; }
.items-stretch { align-items: stretch; }

// Align Content
.content-start { align-content: flex-start; }
.content-end { align-content: flex-end; }
.content-center { align-content: center; }
.content-between { align-content: space-between; }
.content-around { align-content: space-around; }
.content-stretch { align-content: stretch; }

// Align Self
.self-auto { align-self: auto; }
.self-start { align-self: flex-start; }
.self-end { align-self: flex-end; }
.self-center { align-self: center; }
.self-stretch { align-self: stretch; }

// Flex Item
.flex-1 { flex: 1 1 0%; }
.flex-auto { flex: 1 1 auto; }
.flex-initial { flex: 0 1 auto; }
.flex-none { flex: none; }

// Grow & Shrink
.grow { flex-grow: 1; }
.grow-0 { flex-grow: 0; }
.shrink { flex-shrink: 1; }
.shrink-0 { flex-shrink: 0; }

// Order
.order-first { order: -9999; }
.order-last { order: 9999; }
.order-none { order: 0; }
@for $i from 1 through 12 {
  .order-#{$i} { order: #{$i}; }
}

// Gap
.gap-0 { gap: 0; }
.gap-1 { gap: $spacing-1; }
.gap-2 { gap: $spacing-2; }
.gap-3 { gap: $spacing-3; }
.gap-4 { gap: $spacing-4; }
.gap-5 { gap: $spacing-5; }
.gap-6 { gap: $spacing-6; }
.gap-8 { gap: $spacing-8; }

.gap-x-0 { column-gap: 0; }
.gap-x-1 { column-gap: $spacing-1; }
.gap-x-2 { column-gap: $spacing-2; }
.gap-x-3 { column-gap: $spacing-3; }
.gap-x-4 { column-gap: $spacing-4; }

.gap-y-0 { row-gap: 0; }
.gap-y-1 { row-gap: $spacing-1; }
.gap-y-2 { row-gap: $spacing-2; }
.gap-y-3 { row-gap: $spacing-3; }
.gap-y-4 { row-gap: $spacing-4; }

// ========================================
// Stack (Vertical Layout)
// ========================================
.stack {
  display: flex;
  flex-direction: column;
  
  &.stack-0 { gap: 0; }
  &.stack-1 { gap: $spacing-1; }
  &.stack-2 { gap: $spacing-2; }
  &.stack-3 { gap: $spacing-3; }
  &.stack-4 { gap: $spacing-4; }
  &.stack-6 { gap: $spacing-6; }
  &.stack-8 { gap: $spacing-8; }
}

// Horizontal Stack
.hstack {
  display: flex;
  flex-direction: row;
  align-items: center;
  
  &.hstack-0 { gap: 0; }
  &.hstack-1 { gap: $spacing-1; }
  &.hstack-2 { gap: $spacing-2; }
  &.hstack-3 { gap: $spacing-3; }
  &.hstack-4 { gap: $spacing-4; }
}

// ========================================
// Spacing Utilities
// ========================================
// Margin
$spacing-map: (
  0: 0,
  1: $spacing-1,
  2: $spacing-2,
  3: $spacing-3,
  4: $spacing-4,
  5: $spacing-5,
  6: $spacing-6,
  8: $spacing-8,
  10: $spacing-10,
  12: $spacing-12,
  auto: auto
);

@each $key, $value in $spacing-map {
  .m-#{$key} { margin: $value; }
  .mx-#{$key} { margin-left: $value; margin-right: $value; }
  .my-#{$key} { margin-top: $value; margin-bottom: $value; }
  .mt-#{$key} { margin-top: $value; }
  .mr-#{$key} { margin-right: $value; }
  .mb-#{$key} { margin-bottom: $value; }
  .ml-#{$key} { margin-left: $value; }
}

// Padding (auto 제외)
$padding-map: (
  0: 0,
  1: $spacing-1,
  2: $spacing-2,
  3: $spacing-3,
  4: $spacing-4,
  5: $spacing-5,
  6: $spacing-6,
  8: $spacing-8,
  10: $spacing-10,
  12: $spacing-12
);

@each $key, $value in $padding-map {
  .p-#{$key} { padding: $value; }
  .px-#{$key} { padding-left: $value; padding-right: $value; }
  .py-#{$key} { padding-top: $value; padding-bottom: $value; }
  .pt-#{$key} { padding-top: $value; }
  .pr-#{$key} { padding-right: $value; }
  .pb-#{$key} { padding-bottom: $value; }
  .pl-#{$key} { padding-left: $value; }
}

// ========================================
// Width & Height
// ========================================
.w-full { width: 100%; }
.w-screen { width: 100vw; }
.w-auto { width: auto; }
.w-1\/2 { width: 50%; }
.w-1\/3 { width: 33.333333%; }
.w-2\/3 { width: 66.666667%; }
.w-1\/4 { width: 25%; }
.w-3\/4 { width: 75%; }

.min-w-0 { min-width: 0; }
.min-w-full { min-width: 100%; }
.max-w-full { max-width: 100%; }
.max-w-screen { max-width: 100vw; }

.h-full { height: 100%; }
.h-screen { height: 100vh; }
.h-auto { height: auto; }
.min-h-0 { min-height: 0; }
.min-h-full { min-height: 100%; }
.min-h-screen { min-height: 100vh; }

// Safe area height (모바일)
.min-h-screen-safe {
  min-height: 100vh;
  min-height: calc(var(--vh, 1vh) * 100);
}

// ========================================
// Position
// ========================================
.relative { position: relative; }
.absolute { position: absolute; }
.fixed { position: fixed; }
.sticky { position: sticky; }
.static { position: static; }

// Inset
.inset-0 { top: 0; right: 0; bottom: 0; left: 0; }
.inset-x-0 { left: 0; right: 0; }
.inset-y-0 { top: 0; bottom: 0; }
.top-0 { top: 0; }
.right-0 { right: 0; }
.bottom-0 { bottom: 0; }
.left-0 { left: 0; }

// Z-index
.z-0 { z-index: 0; }
.z-10 { z-index: 10; }
.z-20 { z-index: 20; }
.z-30 { z-index: 30; }
.z-40 { z-index: 40; }
.z-50 { z-index: 50; }
.z-auto { z-index: auto; }

// ========================================
// Display
// ========================================
.block { display: block; }
.inline-block { display: inline-block; }
.inline { display: inline; }
.hidden { display: none; }
.contents { display: contents; }

// ========================================
// Overflow
// ========================================
.overflow-auto { overflow: auto; }
.overflow-hidden { overflow: hidden; }
.overflow-visible { overflow: visible; }
.overflow-scroll { overflow: scroll; }
.overflow-x-auto { overflow-x: auto; }
.overflow-x-hidden { overflow-x: hidden; }
.overflow-y-auto { overflow-y: auto; }
.overflow-y-hidden { overflow-y: hidden; }

// 모바일 스크롤 최적화
.scroll-smooth {
  scroll-behavior: smooth;
  @include momentum-scroll;
}

// ========================================
// Divider
// ========================================
.divider {
  height: 1px;
  background: var(--border-color);
  margin: $spacing-4 0;
  border: none;
  
  &.divider-sm { margin: $spacing-2 0; }
  &.divider-lg { margin: $spacing-6 0; }
  
  &.divider-dashed {
    background: none;
    border-top: 1px dashed var(--border-color);
  }
  
  &.divider-dotted {
    background: none;
    border-top: 1px dotted var(--border-color);
  }
}

.divider-vertical {
  width: 1px;
  height: 100%;
  min-height: 20px;
  background: var(--border-color);
  margin: 0 $spacing-3;
  
  &.divider-sm { margin: 0 $spacing-2; }
  &.divider-lg { margin: 0 $spacing-4; }
}

// Divider with text
.divider-text {
  display: flex;
  align-items: center;
  gap: $spacing-3;
  color: var(--text-tertiary);
  font-size: $font-size-sm;
  margin: $spacing-4 0;
  
  &::before,
  &::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border-color);
  }
}

// ========================================
// Section
// ========================================
.section {
  padding: $spacing-6 0;
  
  &.section-sm { padding: $spacing-4 0; }
  &.section-lg { padding: $spacing-10 0; }
  &.section-xl { padding: $spacing-16 0; }
}

.section-header {
  margin-bottom: $spacing-4;
  
  .section-title {
    font-size: $font-size-lg;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 $spacing-1 0;
  }
  
  .section-subtitle {
    font-size: $font-size-sm;
    color: var(--text-secondary);
    margin: 0;
  }
}

// ========================================
// Aspect Ratio
// ========================================
.aspect-auto { aspect-ratio: auto; }
.aspect-square { aspect-ratio: 1 / 1; }
.aspect-video { aspect-ratio: 16 / 9; }
.aspect-4\/3 { aspect-ratio: 4 / 3; }
.aspect-3\/2 { aspect-ratio: 3 / 2; }
.aspect-2\/1 { aspect-ratio: 2 / 1; }

// ========================================
// Object Fit (for images)
// ========================================
.object-contain { object-fit: contain; }
.object-cover { object-fit: cover; }
.object-fill { object-fit: fill; }
.object-none { object-fit: none; }
.object-scale-down { object-fit: scale-down; }

.object-center { object-position: center; }
.object-top { object-position: top; }
.object-bottom { object-position: bottom; }
.object-left { object-position: left; }
.object-right { object-position: right; }

// ========================================
// Visibility
// ========================================
.visible { visibility: visible; }
.invisible { visibility: hidden; }
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// ========================================
// Float & Clear
// ========================================
.float-left { float: left; }
.float-right { float: right; }
.float-none { float: none; }
.clear-left { clear: left; }
.clear-right { clear: right; }
.clear-both { clear: both; }
.clearfix::after {
  content: '';
  display: table;
  clear: both;
}

// ========================================
// Box Sizing
// ========================================
.box-border { box-sizing: border-box; }
.box-content { box-sizing: content-box; }

// ========================================
// Safe Area (iOS)
// ========================================
.safe-top {
  padding-top: env(safe-area-inset-top);
}

.safe-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}

.safe-left {
  padding-left: env(safe-area-inset-left);
}

.safe-right {
  padding-right: env(safe-area-inset-right);
}

.safe-all {
  padding-top: env(safe-area-inset-top);
  padding-right: env(safe-area-inset-right);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
}

// ========================================
// Center Utilities
// ========================================
.center {
  display: flex;
  align-items: center;
  justify-content: center;
}

.center-x {
  display: flex;
  justify-content: center;
}

.center-y {
  display: flex;
  align-items: center;
}

// Absolute center
.center-absolute {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

// ========================================
// Text Alignment
// ========================================
.text-left { text-align: left; }
.text-center { text-align: center; }
.text-right { text-align: right; }
.text-justify { text-align: justify; }

// ========================================
// Truncate
// ========================================
.truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.line-clamp-1 {
  display: -webkit-box;
  -webkit-line-clamp: 1;
  line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

// ========================================
// Responsive Utilities
// ========================================
// Mobile first breakpoints
@media (min-width: 576px) {
  .sm\:hidden { display: none; }
  .sm\:block { display: block; }
  .sm\:flex { display: flex; }
  .sm\:inline { display: inline; }
}

@media (min-width: 768px) {
  .md\:hidden { display: none; }
  .md\:block { display: block; }
  .md\:flex { display: flex; }
  .md\:inline { display: inline; }
}

// Hide on mobile, show on desktop
.hide-mobile {
  @media (max-width: 767px) {
    display: none !important;
  }
}

// Show on mobile only
.show-mobile {
  @media (min-width: 768px) {
    display: none !important;
  }
}

// ========================================
// Dark Mode
// ========================================
[data-theme="dark"] {
  .divider,
  .divider-vertical {
    background: $dark-border-color;
  }
  
  .divider-dashed,
  .divider-dotted {
    border-color: $dark-border-color;
  }
  
  .divider-text {
    color: $dark-text-secondary;
    
    &::before,
    &::after {
      background: $dark-border-color;
    }
  }
}
